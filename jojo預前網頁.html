
<html>
        <head>
            <title>JoJo網頁設計登陸介面</title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <script type="text/javascript">
                //窗体改变大小时触发事件
                window.onresize = setViewSize;
                var marginLeft=0;
                var marginTop=0;
                //设置画布大小，登录页面显示在屏幕最中间
                function setViewSize() {
                    //计算屏幕大小
                    var w=window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;
                    var h=window.innerHeight
                    || document.documentElement.clientHeight
                    || document.body.clientHeight;
                    //设置登陆div的位置
                    marginLeft = (w-468)/2;
                    marginTop = (h-262)/2;
                    document.getElementById("loginFormMain").style.marginLeft=marginLeft;
                    document.getElementById("loginFormMain").style.marginTop=marginTop;
                }
                
                //默认聚焦在用户名输入框上
                function focusOnUsername() {
                    //调整画布大小和登陆框位置
                    setViewSize();
                    //默认聚焦在输入框上
                    if (document.loginForm) {
                        var usernameInput = document.loginForm.username;
                        if (usernameInput) {
                            usernameInput.focus();
                        }
                    }
                    return;
                }
            
                //检查用户输入
                function checkLogin(){
                    if(checkUsername() && checkPassword()){
                         return true;
                     }		  
                    return false;
                }
                //检查登录用户名
                function checkUsername(){
                    var username = document.loginForm.username;
                    if(username.value.length!=0){
                        return true;
                    }else{
                        alert("請輸入用戶名");
                        return false;
                    }
                }
                //检查登录密码
                function checkPassword(){
                    var password = document.loginForm.password;
                    if(password.value.length!=0){
                        return true;
                    }else{
                        alert("請輸入密碼");
                        return false;
                    }
                }
                var  ID_Interval = 0 ;
            var  SS_Interval = false ;
            var  O_ajax = false ;
            var  A_gpio = new Array() ;
            my_init();   
          function my_init() {
            if ( window.ActiveXObject ) O_ajax = new ActiveXObject("Microsoft.XMLHTTP")
            else  O_ajax = new XMLHttpRequest()
            var i;
            for ( i=0; i < 82-61 ; i++ ) A_gpio[i]= '0' ;
          }  
          
          function chg(nn) { 
            if ( SS_Interval ) {
              clearInterval( ID_Interval ) ;
              SS_Interval = false ;
            } 
            url = "state_gpio.php?ID=chg&led="+nn ;
            O_ajax.open("get",url,true);
            O_ajax.onreadystatechange = flash_chk ;
            O_ajax.send(null);
          }
          
          function flash_chk() {
            if ( O_ajax.readyState == 4 && O_ajax.status == 200 ) {
              var msg = O_ajax.responseText;
              var a_state = msg.split("");
              var i , j , c
              for ( i=0; i < 21 ; i++ ) {
                if ( A_gpio[i] != a_state[i] ) {
                  A_gpio[i] = a_state[i]
              j=i+61
           //       c=(i>7)?'yellow':'red';
                  document.getElementById(""+j).style.backgroundColor=(a_state[i]=='1')?((i>7)?'yellow':'red'):'gold'	
                }
              }
            }
            if ( ! SS_Interval ) {
              ID_Interval = setInterval("routine()",1000);
              SS_Interval = true ;
            }
          }
          
          function routine() {
            var dd=new Date();
            var tt=dd.toLocaleTimeString();  
            url = "state_gpio.php?ID=rr&led=00" ;
            O_ajax.open("get",url,true);
            O_ajax.onreadystatechange = flash_chk ;
            O_ajax.send(null);
            document.getElementById('clock').innerHTML = tt ;
          }
          ID_Interval = setInterval("routine()",200);
            SS_Interval = true ;
            </script>
        </head>
         
        <body bgcolor="yellow" onload="javascript:focusOnUsername();" >
             <form  action="success.html" name="loginForm" >
             <div  id="loginFormMain">
                    <font size=6 color=blue id='clock'></font>
                 <table  style="width:468px;height:262px;background-color: gray;text-align: center;">
                      <tr>
                           <th colspan="2" align="center" >管理系统登录</th>
                      </tr>
                      <tr>
                          <td>用户名:<input type="text" style="width: 200px;height: 30px;"  name="username"></td>
                      </tr>
                      <tr>
                          <td>密  码:<input type="password"  style="width: 200px;height: 30px;"  name="password"></td>
                      </tr>
                      <tr>
                          <td align="center" ><input  formmethod="post" type="submit" style="cursor: pointer;font-style: inherit;" name="submit"  onclick="return checkLogin();" value="登录" > 
                              <input type="reset"  style="cursor: pointer;" name=reset  value="重置"></td>
                      </tr>
                 </table>
             </div>
              </form>
        </body>
        </html>

    